{% extends 'base.html' %}
{% block content %}


{% with messages = get_flashed_messages() %}
{% if messages %}

{% for message in messages %}
<li>{{ message }}</li>
{% endfor %}
{% endif %}
{% endwith %}







<body>





    <script >
    const elts = {
    text1: document.getElementById("text1"),
    text2: document.getElementById("text2")
};

const texts = [
    "If",
    "You",
    "Like",
    "It",
    "Please",
    "Give",
    "a Love",
    ":)",
    "by @DotOnion"
];

const morphTime = 1;
const cooldownTime = 0.25;

let textIndex = texts.length - 1;
let time = new Date();
let morph = 0;
let cooldown = cooldownTime;

elts.text1.textContent = texts[textIndex % texts.length];
elts.text2.textContent = texts[(textIndex + 1) % texts.length];

function doMorph() {
    morph -= cooldown;
    cooldown = 0;

    let fraction = morph / morphTime;

    if (fraction > 1) {
        cooldown = cooldownTime;
        fraction = 1;
    }

    setMorph(fraction);
}

function setMorph(fraction) {
    elts.text2.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`;
    elts.text2.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`;

    fraction = 1 - fraction;
    elts.text1.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`;
    elts.text1.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`;

    elts.text1.textContent = texts[textIndex % texts.length];
    elts.text2.textContent = texts[(textIndex + 1) % texts.length];
}

function doCooldown() {
    morph = 0;

    elts.text2.style.filter = "";
    elts.text2.style.opacity = "100%";

    elts.text1.style.filter = "";
    elts.text1.style.opacity = "0%";
}

function animate() {
    requestAnimationFrame(animate);

    let newTime = new Date();
    let shouldIncrementIndex = cooldown > 0;
    let dt = (newTime - time) / 1000;
    time = newTime;

    cooldown -= dt;

    if (cooldown <= 0) {
        if (shouldIncrementIndex) {
            textIndex++;
        }

        doMorph();
    } else {
        doCooldown();
    }
}

animate();

    </script>





	<section class="header-section">
		<div class="header" id="topheader">

		<div id="demo" class="carousel slide" data-ride="carousel">

			<!-- Indicators -->
			<ul class="carousel-indicators">
				<li data-target="#demo" data-slide-to="0" class="active"></li>
				<li data-target="#demo" data-slide-to="1"></li>
				<li data-target="#demo" data-slide-to="2"></li>
			</ul>

			<!-- The slideshow -->
			<div class="carousel-inner">

				<div class="carousel-item active">
					<img src="static/img/ct1.jpg" class="img-fluid" alt="Responsive image">

					<div class="center-div">
						<h1 class> Buyers meets Sellers. </h1>
						<p class>We bring both sides of the string together.</p>
						<div class="header-buttons">
							<a href="{{ url_for('signup_merchant') }}">Seller Sign up</a>
							<a href="{{ url_for('signup')}}">Buyer Sign up</a>
						</div>
					</div>
				</div>
				<div class="carousel-item">
					<img src="static/img/c2.jpg" class="img-fluid" alt="Responsive image">
					<div class="center-div">
						<h1 class> Start Shopping With Us Now </h1>
						<p class>  Freely Explore our products. Create your account now or later at checkout.</p>
						<div class="header-buttons">
							<a href="{{ url_for('login') }}">Login</a>
							<a href="{{ url_for('signup')}}">Signup</a>
						</div>
					</div>

				</div>
				<div class="carousel-item">
					<img src="static/img/c5.jpg" class="img-fluid" alt="Responsive image">
					<div class="center-div">
						<h1 class> Start Selling with Us Now</h1>
						<p class> Either you're a small business or large scale seller. We're here for you.</p>
						<div class="header-buttons">
							<a href="{{ url_for('signup_merchant') }}"> Sign up</a>
							<a href="{{ url_for('login_merchant') }}">Login</a>
						</div>
					</div>

				</div>
			</div>

			<!-- Left and right controls -->
			<a class="carousel-control-prev" href="#demo" data-slide="prev">
				<span class="carousel-control-prev-icon"></span>
			</a>
			<a class="carousel-control-next" href="#demo" data-slide="next">
				<span class="carousel-control-next-icon"></span>
			</a>

		</div>
	</div>


</section>





<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
    <script src="jquery.counterup.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>












<section>
<style>
    .row{
        margin-top: 20px;
    }
</style>

<div>
    <div class="row">
        {% for product in products %}
        <div class="col-sm-6 col-md-4 col-lg-4 col-xl-3" >
            <div class="card" style="width: 18rem; ">

                <img src="{{url_for('static', filename='img/' + product.image_1)}}" alt="{{product.name}}"
                    class="card-img-top" height="250">

                {% if product.discount > 0 %}
            <p2 class="animate-charcter">{{ product.discount }}% Off</p2>


                {% endif %}
                <p3>{{product.name}}</p3>
                <p3 class="text-start">Price ${{product.price}}
                </p3>
                <div class="card-footer">
                    <a href="/product/{{product.id}}" class=" float-end btn btn-sm btn-dark " float-left>Product details</a>
                    <form action="{{url_for('AddCart')}}" method="post">
                        <input type="hidden" name="product_id" value="{{product.id}}">
                        <p>Quantity:</p>
                        <input type="number" name ="quantity" id="" value="1" min="1" max="{{product.availablestock}}">

                        <button type="submit" class="float-end btn btn-sm btn-dark" btn-warning float-right> Add to Cart</button>


                    </form>


                </div>

            </div>
        </div>
        {% endfor %}
    </div>
</div>
</section>
    </body>


{% endblock content %}